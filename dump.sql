--
-- PostgreSQL database dump
--

\restrict PCNQbuSItyIO59m6xf04zaYs2A7LcNkdlJ7qfjnDBuwUuwSocqQz2jfyP3z42K7

-- Dumped from database version 18.0
-- Dumped by pg_dump version 18.0

-- Started on 2025-11-14 22:57:03

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 226 (class 1259 OID 24994)
-- Name: biglietto; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.biglietto (
    id_biglietto integer NOT NULL,
    id_prenotazione integer NOT NULL,
    data_emissione date DEFAULT CURRENT_DATE,
    prezzo numeric(10,2) NOT NULL,
    stato character varying(30) DEFAULT 'valido'::character varying NOT NULL
);


ALTER TABLE public.biglietto OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 24993)
-- Name: biglietto_id_biglietto_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.biglietto ALTER COLUMN id_biglietto ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.biglietto_id_biglietto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 25082)
-- Name: biglietto_linea; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.biglietto_linea (
    id integer NOT NULL,
    id_biglietto integer NOT NULL,
    prezzo_linea numeric(10,2) NOT NULL,
    id_treno integer NOT NULL,
    id_percorso integer NOT NULL,
    ordine integer NOT NULL,
    classe character varying(20) NOT NULL
);


ALTER TABLE public.biglietto_linea OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 25071)
-- Name: capienza_posti; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.capienza_posti (
    id integer NOT NULL,
    id_treno integer NOT NULL,
    id_percorso integer NOT NULL,
    data date NOT NULL,
    classe character varying(20) NOT NULL,
    posti_capienti integer NOT NULL
);


ALTER TABLE public.capienza_posti OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 24944)
-- Name: operatore; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.operatore (
    id_operatore integer NOT NULL,
    nome character varying(100) NOT NULL,
    cognome character varying(100) NOT NULL,
    email character varying(255) NOT NULL,
    password character varying(255) NOT NULL
);


ALTER TABLE public.operatore OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 24950)
-- Name: operatore_id_operatore_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.operatore ALTER COLUMN id_operatore ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.operatore_id_operatore_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 24960)
-- Name: ospite; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ospite (
    id_ospite integer NOT NULL,
    nome character varying(100) NOT NULL,
    cognome character varying(100) NOT NULL,
    data_nascita date,
    email character varying(255),
    telefono character varying(30)
);


ALTER TABLE public.ospite OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 24959)
-- Name: ospite_id_ospite_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.ospite ALTER COLUMN id_ospite ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.ospite_id_ospite_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 25016)
-- Name: pagamento; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pagamento (
    id_pagamento integer NOT NULL,
    id_biglietto integer NOT NULL,
    metodo character varying(50) NOT NULL,
    importo numeric(10,2) NOT NULL,
    data_pagamento timestamp with time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.pagamento OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 25015)
-- Name: pagamento_id_pagamento_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.pagamento ALTER COLUMN id_pagamento ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.pagamento_id_pagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 230 (class 1259 OID 25059)
-- Name: percorso; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.percorso (
    id integer NOT NULL,
    stazione_partenza character varying(100) NOT NULL,
    stazione_arrivo character varying(100) NOT NULL,
    data_viaggio date NOT NULL,
    durata integer NOT NULL,
    costo_base numeric(10,2) NOT NULL,
    ora_partenza time with time zone NOT NULL
);


ALTER TABLE public.percorso OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 24971)
-- Name: prenotazione; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.prenotazione (
    id_prenotazione integer NOT NULL,
    id_ospite integer NOT NULL,
    id_operatore integer NOT NULL,
    data_prenotazione timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    stato_prenotazione character varying(50) DEFAULT 'attiva'::character varying NOT NULL
);


ALTER TABLE public.prenotazione OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 24970)
-- Name: prenotazione_id_prenotazione_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.prenotazione ALTER COLUMN id_prenotazione ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.prenotazione_id_prenotazione_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 229 (class 1259 OID 25048)
-- Name: treno; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.treno (
    id integer NOT NULL,
    compagnia character varying(100) NOT NULL,
    tipo_treno character varying(50) NOT NULL,
    numero_treno character varying(20) NOT NULL,
    "capacità" integer NOT NULL,
    stato character varying(30) NOT NULL
);


ALTER TABLE public.treno OWNER TO postgres;

--
-- TOC entry 4996 (class 0 OID 24994)
-- Dependencies: 226
-- Data for Name: biglietto; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.biglietto (id_biglietto, id_prenotazione, data_emissione, prezzo, stato) FROM stdin;
7	5	2025-11-22	87.90	valid
\.


--
-- TOC entry 5002 (class 0 OID 25082)
-- Dependencies: 232
-- Data for Name: biglietto_linea; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.biglietto_linea (id, id_biglietto, prezzo_linea, id_treno, id_percorso, ordine, classe) FROM stdin;
1	7	11.20	9806	1	1	2
2	7	10.80	9806	2	2	2
3	7	12.40	9806	3	3	2
4	7	7.30	9806	4	4	2
5	7	9.60	9806	5	5	2
6	7	8.50	9806	6	6	2
7	7	9.60	9416	7	7	2
8	7	8.70	9416	8	8	2
9	7	9.80	9416	9	9	2
\.


--
-- TOC entry 5001 (class 0 OID 25071)
-- Dependencies: 231
-- Data for Name: capienza_posti; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.capienza_posti (id, id_treno, id_percorso, data, classe, posti_capienti) FROM stdin;
1	9806	1	2025-11-22	Standard	500
2	9806	2	2025-11-22	Standard	500
3	9806	3	2025-11-22	Standard	500
4	9806	4	2025-11-22	Standard	500
5	9806	5	2025-11-22	Standard	500
6	9806	6	2025-11-22	Standard	500
7	9416	7	2025-11-22	Standard	500
8	9416	8	2025-11-22	Standard	500
9	9416	9	2025-11-22	Standard	500
\.


--
-- TOC entry 4989 (class 0 OID 24944)
-- Dependencies: 219
-- Data for Name: operatore; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.operatore (id_operatore, nome, cognome, email, password) FROM stdin;
3	Simone	Rossi	simone.rossi@gmail.com	User123
\.


--
-- TOC entry 4992 (class 0 OID 24960)
-- Dependencies: 222
-- Data for Name: ospite; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ospite (id_ospite, nome, cognome, data_nascita, email, telefono) FROM stdin;
3	Luca	Bianchi	1991-11-03	luca.bianchi@gmail.com	333-1056450
\.


--
-- TOC entry 4998 (class 0 OID 25016)
-- Dependencies: 228
-- Data for Name: pagamento; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.pagamento (id_pagamento, id_biglietto, metodo, importo, data_pagamento) FROM stdin;
1	7	carta di pagamento	87.90	2025-11-22 00:00:00+01
\.


--
-- TOC entry 5000 (class 0 OID 25059)
-- Dependencies: 230
-- Data for Name: percorso; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.percorso (id, stazione_partenza, stazione_arrivo, data_viaggio, durata, costo_base, ora_partenza) FROM stdin;
1	BariCentrale	Foggia	2025-11-22	61	87.90	06:35:00+01
2	Foggia	Termini	2025-11-22	43	87.90	07:39:00+01
3	Termoli	PescaraCentrale	2025-11-22	45	87.90	08:24:00+01
4	PescaraCentrale	Ancona	2025-11-22	73	87.90	09:12:00+01
5	Ancona	Rimini	2025-11-22	50	87.90	10:28:00+01
6	Rimini	BolognaCentrale	2025-11-22	55	87.90	11:20:00+01
7	BolognaCentrale	Ferrara	2025-11-22	29	87.90	12:58:00+01
8	Ferrara	Padova	2025-11-22	35	87.90	13:29:00+01
9	Padova	VeneziaMestre	2025-11-22	17	87.90	14:06:00+01
\.


--
-- TOC entry 4994 (class 0 OID 24971)
-- Dependencies: 224
-- Data for Name: prenotazione; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.prenotazione (id_prenotazione, id_ospite, id_operatore, data_prenotazione, stato_prenotazione) FROM stdin;
5	3	3	2025-11-22 00:00:00+01	attiva
\.


--
-- TOC entry 4999 (class 0 OID 25048)
-- Dependencies: 229
-- Data for Name: treno; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.treno (id, compagnia, tipo_treno, numero_treno, "capacità", stato) FROM stdin;
9416	TrenItalia	AltaVelocità	9416	500	attivo
9806	TrenItalia	AltaVelocità	9806	500	attivo
\.


--
-- TOC entry 5008 (class 0 OID 0)
-- Dependencies: 225
-- Name: biglietto_id_biglietto_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.biglietto_id_biglietto_seq', 7, true);


--
-- TOC entry 5009 (class 0 OID 0)
-- Dependencies: 220
-- Name: operatore_id_operatore_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.operatore_id_operatore_seq', 3, true);


--
-- TOC entry 5010 (class 0 OID 0)
-- Dependencies: 221
-- Name: ospite_id_ospite_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ospite_id_ospite_seq', 3, true);


--
-- TOC entry 5011 (class 0 OID 0)
-- Dependencies: 227
-- Name: pagamento_id_pagamento_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.pagamento_id_pagamento_seq', 1, true);


--
-- TOC entry 5012 (class 0 OID 0)
-- Dependencies: 223
-- Name: prenotazione_id_prenotazione_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.prenotazione_id_prenotazione_seq', 5, true);


--
-- TOC entry 4817 (class 2606 OID 25002)
-- Name: biglietto biglietto_id_prenotazione_unique; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto
    ADD CONSTRAINT biglietto_id_prenotazione_unique UNIQUE (id_prenotazione);


--
-- TOC entry 4831 (class 2606 OID 25093)
-- Name: biglietto_linea biglietto_linea_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto_linea
    ADD CONSTRAINT biglietto_linea_pkey PRIMARY KEY (id, id_biglietto, id_treno, id_percorso);


--
-- TOC entry 4819 (class 2606 OID 24999)
-- Name: biglietto biglietto_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto
    ADD CONSTRAINT biglietto_pkey PRIMARY KEY (id_biglietto);


--
-- TOC entry 4821 (class 2606 OID 25013)
-- Name: biglietto biglietto_prenotazione_unique; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto
    ADD CONSTRAINT biglietto_prenotazione_unique UNIQUE (id_prenotazione);


--
-- TOC entry 4829 (class 2606 OID 25081)
-- Name: capienza_posti capienza_posti_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.capienza_posti
    ADD CONSTRAINT capienza_posti_pkey PRIMARY KEY (id, id_treno, id_percorso);


--
-- TOC entry 4801 (class 2606 OID 25152)
-- Name: capienza_posti chk_classe_capienza; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.capienza_posti
    ADD CONSTRAINT chk_classe_capienza CHECK (((classe)::text = ANY ((ARRAY['Standard'::character varying, 'Business'::character varying, 'Premium'::character varying, 'Executive'::character varying])::text[]))) NOT VALID;


--
-- TOC entry 4803 (class 2606 OID 25121)
-- Name: biglietto_linea chk_classe_linea; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.biglietto_linea
    ADD CONSTRAINT chk_classe_linea CHECK (((classe)::text = ANY ((ARRAY['1'::character varying, '2'::character varying])::text[]))) NOT VALID;


--
-- TOC entry 4799 (class 2606 OID 25116)
-- Name: percorso chk_costo_base; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.percorso
    ADD CONSTRAINT chk_costo_base CHECK ((costo_base > (0)::numeric)) NOT VALID;


--
-- TOC entry 4800 (class 2606 OID 25115)
-- Name: percorso chk_durata_positiva; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.percorso
    ADD CONSTRAINT chk_durata_positiva CHECK ((durata > 0)) NOT VALID;


--
-- TOC entry 4804 (class 2606 OID 25120)
-- Name: biglietto_linea chk_ordine_linea; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.biglietto_linea
    ADD CONSTRAINT chk_ordine_linea CHECK ((ordine > 0)) NOT VALID;


--
-- TOC entry 4802 (class 2606 OID 25117)
-- Name: capienza_posti chk_posti_capienti; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.capienza_posti
    ADD CONSTRAINT chk_posti_capienti CHECK ((posti_capienti > 0)) NOT VALID;


--
-- TOC entry 4805 (class 2606 OID 25119)
-- Name: biglietto_linea chk_prezzo_linea; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.biglietto_linea
    ADD CONSTRAINT chk_prezzo_linea CHECK ((prezzo_linea > (0)::numeric)) NOT VALID;


--
-- TOC entry 4797 (class 2606 OID 25014)
-- Name: biglietto chk_stato_biglietto; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.biglietto
    ADD CONSTRAINT chk_stato_biglietto CHECK (((stato)::text = ANY ((ARRAY['valid'::character varying, 'annullato'::character varying, 'usato'::character varying])::text[]))) NOT VALID;


--
-- TOC entry 4796 (class 2606 OID 24992)
-- Name: prenotazione chk_stato_prenotazione; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.prenotazione
    ADD CONSTRAINT chk_stato_prenotazione CHECK (((stato_prenotazione)::text = ANY ((ARRAY['attiva'::character varying, 'annullata'::character varying, 'completata'::character varying])::text[]))) NOT VALID;


--
-- TOC entry 4798 (class 2606 OID 25114)
-- Name: treno chk_stato_treno; Type: CHECK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE public.treno
    ADD CONSTRAINT chk_stato_treno CHECK (((stato)::text = ANY ((ARRAY['attivo'::character varying, 'manutenzione'::character varying, 'fuori_servizio'::character varying])::text[]))) NOT VALID;


--
-- TOC entry 4807 (class 2606 OID 24958)
-- Name: operatore operatore__email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.operatore
    ADD CONSTRAINT operatore__email_key UNIQUE (email);


--
-- TOC entry 4809 (class 2606 OID 24949)
-- Name: operatore operatore_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.operatore
    ADD CONSTRAINT operatore_pkey PRIMARY KEY (id_operatore);


--
-- TOC entry 4811 (class 2606 OID 24969)
-- Name: ospite ospite_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ospite
    ADD CONSTRAINT ospite_email_key UNIQUE (email);


--
-- TOC entry 4813 (class 2606 OID 24965)
-- Name: ospite ospite_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ospite
    ADD CONSTRAINT ospite_pkey PRIMARY KEY (id_ospite);


--
-- TOC entry 4823 (class 2606 OID 25021)
-- Name: pagamento pagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pagamento
    ADD CONSTRAINT pagamento_pkey PRIMARY KEY (id_pagamento);


--
-- TOC entry 4827 (class 2606 OID 25070)
-- Name: percorso percorso_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.percorso
    ADD CONSTRAINT percorso_pkey PRIMARY KEY (id);


--
-- TOC entry 4815 (class 2606 OID 24976)
-- Name: prenotazione prenotazione_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.prenotazione
    ADD CONSTRAINT prenotazione_pkey PRIMARY KEY (id_prenotazione);


--
-- TOC entry 4825 (class 2606 OID 25058)
-- Name: treno treno_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.treno
    ADD CONSTRAINT treno_pkey PRIMARY KEY (id);


--
-- TOC entry 4833 (class 2606 OID 25151)
-- Name: biglietto_linea uk_biglietto_ordine; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto_linea
    ADD CONSTRAINT uk_biglietto_ordine UNIQUE (id_biglietto, ordine) INCLUDE (ordine);


--
-- TOC entry 4836 (class 2606 OID 25007)
-- Name: biglietto fk_biglietto_prenotazione; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto
    ADD CONSTRAINT fk_biglietto_prenotazione FOREIGN KEY (id_prenotazione) REFERENCES public.prenotazione(id_prenotazione) ON DELETE CASCADE NOT VALID;


--
-- TOC entry 4838 (class 2606 OID 25139)
-- Name: capienza_posti fk_capienza_percorso; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.capienza_posti
    ADD CONSTRAINT fk_capienza_percorso FOREIGN KEY (id_percorso) REFERENCES public.percorso(id) ON DELETE CASCADE NOT VALID;


--
-- TOC entry 4839 (class 2606 OID 25094)
-- Name: capienza_posti fk_capienza_treno; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.capienza_posti
    ADD CONSTRAINT fk_capienza_treno FOREIGN KEY (id_treno) REFERENCES public.treno(id) NOT VALID;


--
-- TOC entry 4840 (class 2606 OID 25134)
-- Name: biglietto_linea fk_linea_percorso; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto_linea
    ADD CONSTRAINT fk_linea_percorso FOREIGN KEY (id_percorso) REFERENCES public.percorso(id) ON DELETE RESTRICT NOT VALID;


--
-- TOC entry 4841 (class 2606 OID 25129)
-- Name: biglietto_linea fk_linea_treno; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biglietto_linea
    ADD CONSTRAINT fk_linea_treno FOREIGN KEY (id_treno) REFERENCES public.treno(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT VALID;


--
-- TOC entry 4837 (class 2606 OID 25026)
-- Name: pagamento fk_pagamento_biglietto; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pagamento
    ADD CONSTRAINT fk_pagamento_biglietto FOREIGN KEY (id_biglietto) REFERENCES public.biglietto(id_biglietto) ON DELETE CASCADE NOT VALID;


--
-- TOC entry 4834 (class 2606 OID 24987)
-- Name: prenotazione fk_prenotazione_operatore; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.prenotazione
    ADD CONSTRAINT fk_prenotazione_operatore FOREIGN KEY (id_operatore) REFERENCES public.operatore(id_operatore) ON DELETE RESTRICT NOT VALID;


--
-- TOC entry 4835 (class 2606 OID 24982)
-- Name: prenotazione fk_prenotazione_ospite; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.prenotazione
    ADD CONSTRAINT fk_prenotazione_ospite FOREIGN KEY (id_ospite) REFERENCES public.ospite(id_ospite) ON DELETE CASCADE NOT VALID;


-- Completed on 2025-11-14 22:57:03

--
-- PostgreSQL database dump complete
--

\unrestrict PCNQbuSItyIO59m6xf04zaYs2A7LcNkdlJ7qfjnDBuwUuwSocqQz2jfyP3z42K7

